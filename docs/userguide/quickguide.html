<html>
<head>
<style type="text/css"><!--
a:visited {
	text-decoration: none;
	font-size: 12;
	font-family: arial, helvetica, sans-serif;
}
a:link {
	text-decoration: none;
	font-size: 12;
	font-family: arial, helvetica, sans-serif;
}
table {
	border: flat;
}

td {
	font-size: 12;
	font-family: arial, helvetica, sans-serif;
	border: none;
}
body {
	font-size: 12;
	font-family: arial, helvetica, sans-serif;
}
--></style>
<SCRIPT TYPE="text/javascript">
<!--
function popup(mylink, windowname)
{
if (! window.focus)return true;
var href;
if (typeof(mylink) == 'string')
   href=mylink;
else
   href=mylink.href;
window.open(href, windowname, 'width=650,height=600,scrollbars=yes');
return false;
}
//-->
</SCRIPT>
</head>
<body bgcolor=white background=bg.gif>

<table align="center" width="80%">
<tr height=50><td valign="top"><img src="../arrows.gif"><b> 
Quick Guide for Packmol's  Input </b></td>
<td valign="top" align="right"> 
<a target="_blank" href=./index.html>
[Open to print] 
</a></td></tr>
</table>

<table align="center" width="80%">
<!-- START SECTION -->
<tr height=50><td valign="center"><img src="../text.gif"></td>
<td valign="center"><b> What do you need? </b></td></tr>

<tr><td></td>
<td>
You need coordinate files for each type of molecule you want your
simulation to have. For example, if you are going to simulate a solution
of water and ions, you will need a coordinate file for <i>one</i>  water
molecule, and independent coordinates files for each of the ions. This
coordinate files may be in the PDB, TINKER, MOLDEN or MOLDY format.
<br><br>
Of course, you also need the <tt>Packmol</tt> package, which you can get from
<br><br>
<tt>http://www.ime.unicamp.br/~martinez/packmol</tt>
<br><br>
by clicking on the <a target="contents" href="../download.html">
Download </a> link. By following this link you will download the file
<tt>packmol.tar.gz</tt> which contains the whole source code of
Packmol. If you are a Windows user, download the <tt> packmol.zip </tt>
file instead.
<br><br>
If you plan to use MOLDY as your MD package, read 
<a target=contents href=./read-MOLDY.html>
THIS
</a>
</td>
</tr>
<!-- END SECTION -->


<!-- START SECTION -->
<tr height=50><td valign="center"><img src="../text.gif"></td>
<td valign="center"><b> 
How to compile Packmol
</b></td></tr>

<tr><td></td>
<td>
Once you have downloaded the <tt>packmol.tar.gz</tt> file from the home-page,
you need to expand the files and compile the package. This is done by:
<br><br>
Expanding the files:
<br><br>
<tt>gunzip packmol.tar.gz <br>
tar -xvf packmol.tar</tt>
<br><br>
This will create a directory called <tt>packmol</tt> inside which you can find
the source code. You can build the executable by:
<br><br>
<tt>cd packmol <br>
f77 -O3 *.f -o packmol </tt>
<br><br>
Your compiler may be <tt>g77</tt> or <tt>ftn77</tt>, if the command above does not work
try changing the <tt>f77</tt> by one of these other options. If no error was
detected, an executable called packmol is now ready.

<br><br>
<i> Windows users: </i><br><br>

You need a fortran77 compiler, which you can get from
<br><br>
<a href=http://www.geocities.com/Athens/Olympus/5564/g77.htm>
http://www.geocities.com/Athens/Olympus/5564/g77.htm </a>
<br><br>
Get also the unzip.exe program from this page if you do not have Winzip.
Install the compiler.
<br><br>
Uncompress the <tt> packmol.zip </tt> file from the DOS prompt with 
<br><br><tt>
unzip packmol.zip
<br><br></tt>
or with the Winzip package. This will create a directory called <tt>
packmol.</tt> Go into that directory and compile the package with
<br><br><tt>
g77 -O3 *.f -o packmol.exe
<br><br></tt>
The executable <tt> packmol.exe </tt> is ready.
</td>
</tr>
<!-- END SECTION -->


<!-- START SECTION -->
<tr height=50><td valign="center"><img src="../text.gif"></td>
<td valign="center"><b> 
Running Packmol
</b></td></tr>

<tr><td></td>
<td>
Once you have compiled and built your input file, run Packmol  with
<br><br><tt>
packmol < test.inp
<br><br></tt>
A successful packing will end with something like
<tt><br><br>
------------------------------
<br><br>
Success!
<br>
Final objective function value: .25587E-05
<br>
Minimum distance between atoms: 2.19
<br>
Maximum violation of the constraints: .25359E-05
<br><br>
------------------------------
<br><br></tt>
Where the minimum distance must be greater or equal to the tolerance up
to a precision of 10<sup>-5</sup> and the maximum violation of the constrains must
not be greater than 10<sup>-5</sup>.

</td>
</tr>
<!-- END SECTION -->


<!-- START SECTION -->
<tr height=50><td valign="center"><img src="../text.gif"></td>
<td valign="center"><b> 
Basic input structure
</b></td></tr>

<tr><td></td>
<td>

The minimal input file must contain the distance tolerance required (for
systems at room temperature and pressure and coordinates in Angstroms,
2.0 Å is a good value). This is specified with
<br><br>
<tt>tolerance 2.0</tt>
<br><br>
The file must contain also the name of the output file to be created,
specified with
<br><br>
<tt>output test.pdb</tt>
<br><br>
and the file type (pdb, tinker, xyz or moldy, pdb is the default value),
<br><br>
<tt>filetype pdb</tt>
<br><br>
At least one type of molecule must be present. This is set by the
<tt>structure ... end structure</tt> section, for example, if
<tt>water.pdb</tt> is the
file containing the coordinates of a single water molecule, you could
add to your input file something like
<br><br>
<tt>
structure water.pdb     <br>
&nbsp;&nbsp;number 2000   <br>
&nbsp;&nbsp;inside cube 0. 0. 0. 40.  <br>
end structure
</tt>
<br><br>
This section specifies that 2000 molecules of the <tt>water.pdb</tt> type, will
be placed inside a cube with minimum coordinates
(<i>x</i>,<i>y</i>,<i>z</i>) = (0,0,0) and
maximum coordinates (40,40,40). Therefore, this minimum input file must
be:
<br><br>
<tt>
tolerance 2.0 <br>
output test.pdb <br>
filetype pdb <br>
structure water.pdb <br>
&nbsp;&nbsp;number 2000 <br>
&nbsp;&nbsp;inside cube 0. 0. 0. 40.  <br>
end structure
</tt>
<br><br>
Running Packmol with this input file will fill a cube of side 40.0 Å
with 2000 water molecules. Every pair of atoms of different molecules
will be separated by, at least, 2.0 Å and the the molecules will be
randomly distributed inside de cube.

</td>
</tr>
<!-- END SECTION -->


<!-- START SECTION -->
<tr height=50><td valign="center"><img src="../text.gif"></td>
<td valign="center"><b> 
More types of molecules
</b></td></tr>

<tr><td></td>
<td>
You can add more types of molecules to the same region, or to different
regions of the space, simply adding other <tt>structure ... end
structure</tt>
section to the input file.

</td>
</tr>
<!-- END SECTION -->



<!-- START SECTION -->
<tr height=50><td valign="center"><img src="../text.gif"></td>
<td valign="center"><b> 
Atom selections
</b></td></tr>

<tr><td></td>
<td>

The coordinate file of a single molecule contains, for example, 10
atoms. You can restrain a part of the molecule to be in a specified
region of the space. This is useful for building vesicles where the
hydrophilic  part of the surfactants must be pointing to the aqueous
environment, for example. For the 10 atoms molecule, this is done by
using the keyword atoms, as in
<br><br>
<tt>
structure molecule.pdb           <br> 
&nbsp;&nbsp;inside cube 0. 0. 0. 20.         <br> 
&nbsp;&nbsp;atoms 9 10                       <br> 
&nbsp;&nbsp;&nbsp;&nbsp;inside box 0. 0. 15. 20. 20. 20. <br> 
&nbsp;&nbsp;end atoms                        <br> 
end structure                     
</tt>
<br><br>
In this case, all the atoms of the molecule will be put inside the
defined cube, but atoms 9 and 10 will be restrained to be inside the
box.


</td>
</tr>
<!-- END SECTION -->

<!-- START SECTION -->
<tr height=50><td valign="center"><img src="../text.gif"></td>
<td valign="center"><b> 
Types  of constraints
</b></td></tr>

<tr><td></td>
<td>
There are several types of constraints that can be applied both to whole
molecules or to parts of the molecule. These constraints define the
region of the space in which the molecules must be at the solution. Very
ordered systems can be built in such a way. The constraints  are:


<table align="left" width="100%">
<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 1. </td>
<td valign="bottom"><tt>
fixed
</tt></td>
</tr>

<tr><td></td>
<td>
Usage: <tt>fixed </tt><i>x   y   z  a   b   g</i><br><br>
This options holds the molecule
fixed in the position specified by the parameters. <i>x, y, z, a, b,
g,</i>
which are six real numbers. The first three determine the translation of
the molecule relative to its position in the coordinate file. The former
three parameters are rotation angles (in radians). For this option it is
required that only one molecule is set. It may be accompanied by the
keyword <tt>centerofmass</tt>. If this keyword is present the first three numbers
are the position of the baricenter (not really the center of mass,
because we suppose that all atoms have the same mass). Therefore this
keyword must be used in the following context:
<br><br>
<tt>
structure molecule.pdb   <br>
&nbsp;&nbsp;number 1                 <br>
&nbsp;&nbsp;centerofmass             <br>
&nbsp;&nbsp;fixed 0. 0. 0. 0. 0. 0.  <br>
end structure
</tt>
<br><br>
In this example, the molecule will be fixed with its center of mass at
the origin and no rotation.

</td></tr>
<!-- END CONSTRAINT -->


<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 
2. 
</td>
<td valign="bottom"><tt>
inside cube
</tt></td>
</tr>

<tr><td></td>
<td>
Usage: <tt>inside cube </tt><i>x<sub>min</sub>&nbsp; y<sub>min</sub>&nbsp; z<sub>min</sub>&nbsp;    d</i><br><br>

<i>x<sub>min</sub> ,  y<sub>min</sub> ,  z<sub>min</sub></i> and <i>d</i>
are four real numbers. The coordinates (<i>x</i>,<i>y</i>,<i>z</i>) of the atoms restrained
by this option will satisfy, at the solution:
<center>
<br><br>
<i>x<sub>min</sub></i> < <i>x</i> < <i>x<sub>min</sub></i> + <i>d</i><br>
<i>y<sub>min</sub></i> < <i>y</i> < <i>y<sub>min</sub></i> + <i>d</i><br>
<i>z<sub>min</sub></i> < <i>z</i> < <i>z<sub>min</sub></i> + <i>d</i>
</center>

</td></tr>
<!-- END CONSTRAINT -->


<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 
3. 
</td>
<td valign="bottom"><tt>
outside cube
</tt></td>
</tr>

<tr><td></td>
<td>
Usage: <tt>outside cube </tt><i>x<sub>min</sub>&nbsp; y<sub>min</sub>&nbsp; z<sub>min</sub>&nbsp;    d</i><br><br>

<i>x<sub>min</sub> ,  y<sub>min</sub> ,  z<sub>min</sub></i> and <i>d</i>
are four real numbers. The coordinates (<i>x</i>,<i>y</i>,<i>z</i>) of the atoms restrained
by this option will satisfy, at the solution:
<center>
<br><br>
<i>x</i> < <i>x<sub>min</sub></i> or <i>x</i> > <i>x<sub>min</sub></i> + <i>d</i><br>
<i>y</i> < <i>y<sub>min</sub></i> or <i>y</i> > <i>y<sub>min</sub></i> + <i>d</i><br>
<i>z</i> < <i>z<sub>min</sub></i> or <i>z</i> > <i>z<sub>min</sub></i> + <i>d</i>
</center>

</td></tr>
<!-- END CONSTRAINT -->


<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 
4. 
</td>
<td valign="bottom"><tt>
inside box
</tt></td>
</tr>

<tr><td></td>
<td>
Usage: <tt>inside box</tt>&nbsp; 
<i>x<sub>min</sub>&nbsp;
y<sub>min</sub>&nbsp;
z<sub>min</sub>&nbsp;
x<sub>max</sub>&nbsp;   
y<sub>max</sub>&nbsp; 
z<sub>max</sub></i><br><br>

<i>x<sub>min</sub>&nbsp;,
y<sub>min</sub>&nbsp;,
z<sub>min</sub>&nbsp;,
x<sub>max</sub>&nbsp;,   
y<sub>max</sub>&nbsp;</i> and <i> 
z<sub>max</sub></i>
are six real numbers. The coordinates
(<i>x</i>,<i>y</i>,<i>z</i>) of the atoms restrained by this option will satisfy, at the
solution:
<br><br>
<center>
<i>x<sub>min</sub></i> < <i>x</i> < <i>x<sub>max</sub></i><br>
<i>y<sub>min</sub></i> < <i>y</i> < <i>y<sub>max</sub></i><br>
<i>z<sub>min</sub></i> < <i>z</i> < <i>z<sub>max</sub></i>
</center>


</td></tr>
<!-- END CONSTRAINT -->


<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 
5. 
</td>
<td valign="bottom"><tt>
outside box
</tt></td>
</tr>

<tr><td></td>
<td>
Usage: <tt>outside box</tt>&nbsp; 
<i>x<sub>min</sub>&nbsp;
y<sub>min</sub>&nbsp;
z<sub>min</sub>&nbsp;
x<sub>max</sub>&nbsp;   
y<sub>max</sub>&nbsp; 
z<sub>max</sub></i><br><br>

<i>x<sub>min</sub>&nbsp;,
y<sub>min</sub>&nbsp;,
z<sub>min</sub>&nbsp;,
x<sub>max</sub>&nbsp;,   
y<sub>max</sub>&nbsp;</i> and <i> 
z<sub>max</sub></i>
are six real numbers. The coordinates
(<i>x</i>,<i>y</i>,<i>z</i>) of the atoms restrained by this option will satisfy, at the
solution:
<br><br>
<center>
<i>x</i> < <i>x<sub>min</sub></i> or <i>x</i> > <i>x<sub>max</sub></i><br>
<i>y</i> < <i>y<sub>min</sub></i> or <i>y</i> > <i>y<sub>max</sub></i><br>
<i>z</i> < <i>z<sub>min</sub></i> or <i>z</i> > <i>z<sub>max</sub></i>
</center>


</td></tr>
<!-- END CONSTRAINT -->


<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 
6. 
</td>
<td valign="bottom"><tt>
inside (or outside) sphere
</tt></td>
</tr>

<tr><td></td>
<td>
Spheres are defined by equations of the general form <br><br>
<center>
<img src=img31.png>
</center>
<br>
and, therefore, you must provide four real parameters <i>a</i>,
<i>b</i>, <i>c</i> and <i>d</i>  in
order to define it. The input syntax is, for example,
<br><br><tt>
inside sphere 2.30 3.40 4.50 8.0
</tt><br><br>
and therefore the coordinates of the atoms will satisfy the equation
<br><br>
<center>
<img src=img36.png>
</center><br>  
Other input alternative would be:
<br><br><tt>
outside sphere 2.30 3.40 4.50 8.0
</tt><br><br>
The <tt>outside</tt> parameter is similar to the <tt>inside</tt> parameter, but the
equation above uses <img src=img37.png>  instead of  <img src=img38.png> 
and, therefore, the
atoms will be placed outside the defined sphere.
</td></tr>
<!-- END CONSTRAINT -->


<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 
7. 
</td>
<td valign="bottom"><tt>
inside (or outside) ellipsoid 
</tt></td>
</tr>

<tr><td></td>
<td>
Ellipsoids are defined by the general equation
<br><br>
<center>
<img src=img39.png>
</center>
<br>
The parameters must be given as in the sphere example, but now they are
7, and must be entered in the following order:
<br><br><tt>
inside ellipsoid</tt> <i>&nbsp;
a<sub>1</sub>&nbsp;  
b<sub>1</sub>&nbsp;  
c<sub>1</sub>&nbsp;  
a<sub>2</sub>&nbsp;  
b<sub>2</sub>&nbsp;
c<sub>2</sub>&nbsp;  
d</i>
<br><br>
The coordinates
(<i>a<sub>1</sub></i>,<i>b<sub>1</sub></i>,<i>c<sub>1</sub></i>) 
will define the center of the ellipsoid, the
coordinates 
(<i>a<sub>2</sub></i>,<i>b<sub>2</sub></i>,<i>c<sub>2</sub></i>) 
will define the relative size of the axes and <i>d</i>
will define the volume of the ellipsoid. Of course, the commands
<br><br><tt>
outside ellipsoid</tt> <i>&nbsp;
a<sub>1</sub>&nbsp;  
b<sub>1</sub>&nbsp;  
c<sub>1</sub>&nbsp;  
a<sub>2</sub>&nbsp;  
b<sub>2</sub>&nbsp;
c<sub>2</sub>&nbsp;  
d</i>
<br><br>
can also be used in the same manner as the parameters for spheres. Note
that the case 
<i>a<sub>2</sub></i> = 
<i>b<sub>2</sub></i> = 
<i>c<sub>2</sub></i> = 1.0 provides the exactly the same as the
sphere parameter. The parameters for the ellipsoid are not normalized.
Therefore, if 
<i>a<sub>2</sub></i>, 
<i>b<sub>2</sub></i> and 
<i>c<sub>2</sub></i> are large, the ellipsoid will be large, even
for a small <i>d</i>.
</td></tr>
<!-- END CONSTRAINT -->


<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 
8. 
</td>
<td valign="bottom"><tt>
over (or below) plane 
</tt></td>
</tr>

<tr><td></td>
<td>
The planes are defined by the general equation
<br><br>
<center>
<i>ax</i> + <i>by</i> + <i>cz</i> - <i>d</i> = 0
</center><br>
And it is possible to restrict atoms to be over or below the plane. The syntax is
<br><br><tt>
over plane 2.5 3.2 1.2 6.2
<br><br>
below plane 2.5 3.2 1.2 6.2
<br><br></tt>
where the <tt>over</tt> keyword will make the atoms satisfy the condition
<br><br><center>
2.5<i>x</i> + 3.2<i>y</i> + 1.2<i>z</i> - 6.2 <img src=img37.png> 0
</center><br>
the <tt>below</tt> keyword will make the atoms satisfy
<br><br><center>
2.5<i>x</i> + 3.2<i>y</i> + 1.2<i>z</i> - 6.2 <img src=img38.png> 0
</center><br>
</td></tr>
<!-- END CONSTRAINT -->


<!-- START CONSTRAINT -->
<tr>
<td valign="bottom" align="right" width="20" height="30"> 
9. 
</td>
<td valign="bottom"><tt>
inside (or outside) cylinder
</tt></td>
</tr>
<tr><td></td>
<td>

In order to define a cylinder, it is necessary first to define a
line oriented in space. This line is defined in <tt>Packmol</tt> by the
parametric equation
<br><br><center>
<i>p</i> = (
<i>a<sub>1</sub>&nbsp;</i>,
<i>b<sub>1</sub>&nbsp;</i>,
<i>c<sub>1</sub>&nbsp;</i>) + <i>t</i>&nbsp;(
<i>a<sub>2</sub>&nbsp;</i>,
<i>b<sub>2</sub>&nbsp;</i>,
<i>c<sub>2</sub></i>)
</center><br>
where <i>t</i> is the independent parameter. The vector 
(<i>a<sub>2</sub>&nbsp;</i>,
<i>b<sub>2</sub>&nbsp;</i>,
<i>c<sub>2</sub></i>)                        
defines the
direction of the line. The cylinder is therefore defined by the distance
to this line, <i>d</i>, and a length <i>l</i>. Therefore, the usage must be:
<br><br>
inside cylinder 
&nbsp;<i>a<sub>1</sub></i>  
&nbsp;<i>b<sub>1</sub></i>  
&nbsp;<i>c<sub>1</sub></i>  
&nbsp;<i>a<sub>2</sub></i>  
&nbsp;<i>b<sub>2</sub></i>  
&nbsp;<i>c<sub>2</sub></i>  
&nbsp;<i>d </i> 
&nbsp;<i>l </i>
<br><br>
outside cylinder 
&nbsp;<i>a<sub>1</sub></i>  
&nbsp;<i>b<sub>1</sub></i>  
&nbsp;<i>c<sub>1</sub></i>  
&nbsp;<i>a<sub>2</sub></i>  
&nbsp;<i>b<sub>2</sub></i>  
&nbsp;<i>c<sub>2</sub></i>  
&nbsp;<i>d </i> 
&nbsp;<i>l </i>
<br><br>

Here, the first three parameters define the point where the cylinder
starts, and <i>l</i> defines the length of the cylinder. <i>d</i> defines de
radius of the cylinder. The simpler example is a cylinder oriented in
the <i>x</i> axis and starting at the origin, such as
<br><br><tt>
inside cylinder 0. 0. 0. 1. 0. 0. 10. 20.
<br><br></tt>
This cylinder is specified by the points that have a distance of 10. to
the <i>x</i> axis (the cylinder has a radius of 10.). Furthermore, it starts at
the origin, therefore no atom restricted by this cylinder will have an
<i>x</i>
coordinate less than 0. Furthermore, it has a length of 20. and, as
such, no atom will have an <i>x</i> coordinate greater than 20. The orientation
of the cylinder, parallel to the <i>x</i> axis is defined by the director
vector (1,0,0), the fourth, fifth and sixth parameters. Cylinders can be
oriented in space in anyway.

</td></tr>
<!-- END CONSTRAINT -->
</table>


</td>
</tr>
<!-- END SECTION -->
<tr><td colspan="2" valign="bottom" height="50"><br><hr></td></tr>
</table>

</body>

</html>
